# 架构演进和重构方案
本重构方案的目标是将本开源项目发展为用户友好、部署成本低的社区工作工具，以社区为粒度，提升社区工作者的工作效率，降低社区工作者和社区居民间沟通的成本和调度社区资源的成本。
## 阶段一 居委会项目重构
重构本仓，复用代码以支持未来的适配定制。设计机制来替代原本hardcode的部分。目标是减少50%未来的适配工作量。
1. ~~解耦小区信息和团购信息~~
 - 1.1 ~~创建excel模板机制的抽象。输出不应依赖输入的表格本身，而是依赖表格解析出的数据抽象类。~~
 - 1.2 ~~优化小区类，小区类只应承担小区的独有属性。这也方便之后的架构演进。~~
2. 入口脚本优化
 - 2.1 预留支持小区定制，预留支持excel模板定制
3. 美化目录结构和代码格式，提升可维护性。
4. 新增单元测试
5. 记录适配定制开发者手册
## 阶段二 居委会仓和微信bot仓链接
居委会仓和微信bot仓现在依然是两个独立工作的仓。如果有需要，居委会仓的功能可以接入bot。最终架构中，小区数据和小区定制信息由居委会仓管理，微信bot可以通过统一的接口向居委会仓请求数据或触发动作，这可以降低技术人员维护的成本，因为脚本处理动作将由非技术人员从微信上触发。
## 阶段三 居委会仓和bot归一
架构的最终形态居委会仓演进成数据处理模块，bot仓演进成用户交互模块。是所有数据均由数据处理模块处理，而对用户的输入输出则由用户交互接管。本开源社区持续维护数据模块，不断降低使用成本和部署成本，并对转发模块选型，使用成本最低、效果最好的用户交互方案。

*Author: Haphaistos2333*